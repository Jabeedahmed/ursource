<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: vscode-tfs.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: vscode-tfs.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* global console */
/* global decodeURIComponent */

var vscode = require('vscode');

/**
 * @todo Add a description
 * 
 * @version 0.5.0
 * 
 * @param {String}  command  TFS command to execute
 * @param {Boolean} isGlobal Is this command for the entire workspace ?
 */
function tfsExec(command, isGlobal) {
  isGlobal = !!isGlobal;
  
  if (!isGlobal &amp;&amp; !vscode.window.visibleTextEditors.length) {
    vscode.window.showErrorMessage('TFS: There is no file opened.');
    return;
  }
  
  var itemspec;
  
  if (isGlobal) {
    itemspec = vscode.workspace.rootPath;
  } else {
    itemspec = vscode.window.visibleTextEditors[0].document.uri.toString();

    if (itemspec.substr(0, 8) !== 'file:///') {
      vscode.window.showErrorMessage('TFS: You need to save your file somewhere before.');
      return;
    }
    
    itemspec = decodeURIComponent(itemspec).substr(8);
  }
  
  require('./tfs/' + command)([itemspec]);
}

/**
 * @todo Add a description
 * 
 * @version 0.5.0
 */
function tfsList() {
  var promise = vscode.window.showQuickPick([
    'Add',
    'Check In',
    'Check Out',
    'Get Latest Version',
    'Status (Pending Changes)',
    'Undo'
  ]);
  
  promise.then(function(commandName) {
    switch (commandName) {
      case 'Add':
        tfsExec('add');
        break;
      
      case 'Check In':
        tfsExec('checkin');
        break;
       
      case 'Check Out':
        tfsExec('checkout');
        break;
       
      case 'Get Latest Version':
        tfsExec('get');
        break;
       
      case 'Status (Pending Changes)':
        tfsExec('status');
        break;
      
      case 'Undo':
        tfsExec('undo');
        break;
           
      default:
        console.error('TFS: Something went wrong');
        break;
    }
  });
}

/**
 * @todo Add a description
 * 
 * @version 0.5.0
 */
exports.activate = function(context) {
  vscode.workspace.onDidChangeTextDocument(function() {
    tfsExec('checkout');
  });
  
  var disposables = [
    vscode.commands.registerCommand('vscode-tfs.add',     function() { tfsExec('add'); }),
    vscode.commands.registerCommand('vscode-tfs.checkin', function() { tfsExec('checkin'); }),
    vscode.commands.registerCommand('vscode-tfs.get',     function() { tfsExec('get'); }),
    vscode.commands.registerCommand('vscode-tfs.list',    tfsList),
    vscode.commands.registerCommand('vscode-tfs.status',  function() { tfsExec('status', true); }),
    vscode.commands.registerCommand('vscode-tfs.undo',    function() { tfsExec('undo'); })
  ];
  
  context.subscriptions.concat(disposables);
}

exports.deactivate = function() {}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-TFS%2520Add.html">TFS Add</a></li><li><a href="module-TFS%2520Checkin.html">TFS Checkin</a></li><li><a href="module-TFS%2520Checkout.html">TFS Checkout</a></li><li><a href="module-TFS%2520Get.html">TFS Get</a></li><li><a href="module-TFS%2520Status.html">TFS Status</a></li><li><a href="module-TFS%2520Undo.html">TFS Undo</a></li></ul><h3>Global</h3><ul><li><a href="global.html#activate">activate</a></li><li><a href="global.html#tfsExec">tfsExec</a></li><li><a href="global.html#tfsList">tfsList</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Sat Mar 05 2016 17:43:46 GMT+0100 (Romance Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
